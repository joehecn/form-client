import{a5 as S,r,d as B,Q as U,m as D,j as N,f as n,ab as I,z as T,b as f,C as z,e as a,V as A,p as L,u as l,H as G,G as V,U as Z,X as j,x as H,n as K,Z as Q,Y as X,K as Y,ac as $,ad as q,o as w,_ as J}from"./index-C6CTqLNF.js";/* empty css                      */import{P as g}from"./el-select-HlkMswhJ.js";const O=S("card",()=>{const v=r(1),i=r({cardNum:void 0,name:void 0});return{currentPage:v,searchForm:i}}),W={class:"page-header"},ee={class:"page-header__actions"},ae=B({__name:"CardManage",setup(v){const i=O(),{currentPage:d,searchForm:t}=U(i),x=r(),b=r(0),h=r([]),m=r(!1),c=async()=>{m.value=!0;const s=new URLSearchParams({skip:String((d.value-1)*g),limit:String(g)});t.value.cardNum&&s.append("card",t.value.cardNum),t.value.name&&s.append("name",t.value.name);const e=await I(s),{data:u}=e;h.value=u.list,b.value=u.count,m.value=!1},y=async s=>{$.confirm("确定要删除吗？","提示",{type:"warning"}).then(async()=>{await q(s)&&c()}).catch()};return D(()=>{c()}),(s,e)=>{const u=Y,C=L,p=A,E=G,P=Z,_=K,k=H,F=X,M=T,R=j;return w(),N(M,null,{aside:n(()=>[a(u)]),default:n(()=>[f("div",W,[e[4]||(e[4]=f("h1",null,"身份证管理",-1)),f("div",ee,[a(P,{ref_key:"searchFormRef",ref:x,inline:!0,model:l(t),class:"search-form-inline"},{default:n(()=>[a(p,{prop:"cardNum"},{default:n(()=>[a(C,{clearable:"",modelValue:l(t).cardNum,"onUpdate:modelValue":e[0]||(e[0]=o=>l(t).cardNum=o),placeholder:"身份证号"},null,8,["modelValue"])]),_:1}),a(p,{prop:"name"},{default:n(()=>[a(C,{clearable:"",modelValue:l(t).name,"onUpdate:modelValue":e[1]||(e[1]=o=>l(t).name=o),placeholder:"姓名"},null,8,["modelValue"])]),_:1}),a(p,null,{default:n(()=>[a(E,{onClick:c},{default:n(()=>e[3]||(e[3]=[V("查询")])),_:1})]),_:1})]),_:1},8,["model"])])]),z((w(),N(k,{data:h.value,style:{width:"100%"}},{default:n(()=>[a(_,{prop:"cardNum",label:"身份证号"}),a(_,{prop:"name",label:"姓名"}),a(_,{label:"操作",width:"68"},{default:n(o=>[a(E,{type:"danger",plain:"",onClick:ne=>y(o.row._id)},{default:n(()=>e[5]||(e[5]=[V("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,m.value]]),a(F,{"current-page":l(d),"onUpdate:currentPage":e[2]||(e[2]=o=>Q(d)?d.value=o:null),"page-size":l(g),total:b.value,"hide-on-single-page":!0,layout:"prev, pager, next",onChange:c},null,8,["current-page","page-size","total"])]),_:1})}}}),se=J(ae,[["__scopeId","data-v-27932d20"]]);export{se as default};
